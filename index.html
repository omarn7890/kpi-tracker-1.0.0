<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate SMS Campaign KPI Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 700;
            font-size: 2.5em;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .kpi-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .kpi-value {
            font-size: 2.5em;
            font-weight: 700;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .kpi-percentage {
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .neutral { color: #f39c12; }
        
        .input-section {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            font-size: 0.9em;
        }
        
        input, select {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
            background: white;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            margin-left: 10px;
        }
        
        .list-performance {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .list-performance h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        
        .list-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .list-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .list-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .list-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
        }
        
        .notes-section {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        }
        
        .notes-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        
        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .note-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #f39c12;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .export-section {
            text-align: center;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Real Estate SMS Campaign KPI Tracker</h1>
        
        <!-- Main KPI Dashboard -->
        <div class="dashboard-grid">
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üì± Total Messages Sent</span>
                </div>
                <div class="kpi-value" id="totalSent">0</div>
                <div class="kpi-percentage neutral">This Week: <span id="weekSent">0</span></div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üí¨ Response Rate</span>
                </div>
                <div class="kpi-value" id="responseRate">0%</div>
                <div class="kpi-percentage" id="responseRateChange">Industry Avg: 2-5%</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üìû Appointment Rate</span>
                </div>
                <div class="kpi-value" id="appointmentRate">0%</div>
                <div class="kpi-percentage" id="appointmentRateChange">Of Responses</div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üè† Contract</span>
                </div>
                <div class="kpi-value" id="contractsSigned">0</div>
                <div class="kpi-percentage" id="contractRate">Conversion Rate: <span>0%</span></div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üí∞ Cost Per Lead</span>
                </div>
                <div class="kpi-value" id="costPerLead">$0</div>
                <div class="kpi-percentage neutral">Total Spend: $<span id="totalSpend">0</span></div>
            </div>
            
            <div class="kpi-card">
                <div class="kpi-header">
                    <span class="kpi-title">üí∏ Cost Per Deal</span>
                </div>
                <div class="kpi-value" id="costPerDeal">$0</div>
                <div class="kpi-percentage neutral">ROI Tracking</div>
            </div>
        </div>
        
        <!-- Data Input Section -->
        <div class="input-section">
            <h3>üìù Add Campaign Data</h3>
            <div class="input-grid">
                <div class="input-group">
                    <label for="listType">List Type</label>
                    <select id="listType">
                        <option value="County Records">County Records</option>
                        <option value="Tax Sales">Tax Sales</option>
                        <option value="Probates">Probates</option>
                        <option value="Foreclosure">Mortgage Foreclosure</option>
                        <option value="Credit Collection">Credit Collection</option>
                        <option value="Vacant">Vacant Properties</option>
                        <option value="Absent Owners">Absent Owners</option>
                        <option value="Tired Landlords">Tired Landlords</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="messagesSent">Messages Sent</label>
                    <input type="number" id="messagesSent" placeholder="Enter number">
                </div>
                
                <div class="input-group">
                    <label for="responses">Responses Received</label>
                    <input type="number" id="responses" placeholder="Enter number">
                </div>
                
                <div class="input-group">
                    <label for="appointments">Appointments Set</label>
                    <input type="number" id="appointments" placeholder="Enter number">
                </div>
                
                <div class="input-group">
                    <label for="contracts">Contracts Signed</label>
                    <input type="number" id="contracts" placeholder="Enter number">
                </div>
                
                <div class="input-group">
                    <label for="campaignCost">Campaign Cost ($)</label>
                    <input type="number" id="campaignCost" placeholder="Enter cost">
                </div>
            </div>
            
            <button class="btn" onclick="addCampaignData()">Add Data</button>
            <button class="btn btn-secondary" onclick="clearAllData()">Clear All Data</button>
        </div>
        
        <!-- List Performance Breakdown -->
        <div class="list-performance">
            <h3>üìà Performance by List Type</h3>
            <div class="list-grid" id="listPerformance">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
        
        <!-- Key Insights & Notes -->
        <div class="notes-section">
            <h3>üí° Key Insights & Optimization Notes</h3>
            <div class="notes-grid" id="insightsGrid">
                <!-- Dynamic insights will be generated here -->
            </div>
        </div>
        
        <!-- Export Section -->
        <div class="export-section">
            <button class="btn" onclick="exportData()">üìä Export Data to CSV</button>
        </div>
    </div>

    <script>
        // Data storage
        let campaignData = JSON.parse(localStorage.getItem('smsKpiData')) || [];
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
            updateListPerformance();
            generateInsights();
        });
        
        function addCampaignData() {
            const listType = document.getElementById('listType').value;
            const messagesSent = parseInt(document.getElementById('messagesSent').value) || 0;
            const responses = parseInt(document.getElementById('responses').value) || 0;
            const appointments = parseInt(document.getElementById('appointments').value) || 0;
            const contracts = parseInt(document.getElementById('contracts').value) || 0;
            const campaignCost = parseFloat(document.getElementById('campaignCost').value) || 0;
            
            if (messagesSent === 0) {
                alert('Please enter the number of messages sent');
                return;
            }
            
            const newEntry = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                listType,
                messagesSent,
                responses,
                appointments,
                contracts,
                campaignCost,
                responseRate: (responses / messagesSent * 100).toFixed(2),
                appointmentRate: responses > 0 ? (appointments / responses * 100).toFixed(2) : 0,
                contractRate: appointments > 0 ? (contracts / appointments * 100).toFixed(2) : 0,
                costPerLead: responses > 0 ? (campaignCost / responses).toFixed(2) : 0,
                costPerDeal: contracts > 0 ? (campaignCost / contracts).toFixed(2) : 0
            };
            
            campaignData.push(newEntry);
            localStorage.setItem('smsKpiData', JSON.stringify(campaignData));
            
            // Clear form
            document.getElementById('messagesSent').value = '';
            document.getElementById('responses').value = '';
            document.getElementById('appointments').value = '';
            document.getElementById('contracts').value = '';
            document.getElementById('campaignCost').value = '';
            
            updateDashboard();
            updateListPerformance();
            generateInsights();
        }
        
        function updateDashboard() {
            if (campaignData.length === 0) return;
            
            const totals = campaignData.reduce((acc, curr) => {
                acc.messagesSent += curr.messagesSent;
                acc.responses += curr.responses;
                acc.appointments += curr.appointments;
                acc.contracts += curr.contracts;
                acc.campaignCost += curr.campaignCost;
                return acc;
            }, { messagesSent: 0, responses: 0, appointments: 0, contracts: 0, campaignCost: 0 });
            
            // Calculate rates
            const responseRate = totals.messagesSent > 0 ? (totals.responses / totals.messagesSent * 100).toFixed(1) : 0;
            const appointmentRate = totals.responses > 0 ? (totals.appointments / totals.responses * 100).toFixed(1) : 0;
            const contractRate = totals.messagesSent > 0 ? (totals.contracts / totals.messagesSent * 100).toFixed(2) : 0;
            const costPerLead = totals.responses > 0 ? (totals.campaignCost / totals.responses).toFixed(2) : 0;
            const costPerDeal = totals.contracts > 0 ? (totals.campaignCost / totals.contracts).toFixed(2) : 0;
            
            // Update DOM
            document.getElementById('totalSent').textContent = totals.messagesSent.toLocaleString();
            document.getElementById('responseRate').textContent = responseRate + '%';
            document.getElementById('appointmentRate').textContent = appointmentRate + '%';
            document.getElementById('contractsSigned').textContent = totals.contracts;
            document.getElementById('costPerLead').textContent = '$' + costPerLead;
            document.getElementById('costPerDeal').textContent = totals.contracts > 0 ? '$' + costPerDeal : 'N/A';
            document.getElementById('totalSpend').textContent = totals.campaignCost.toFixed(2);
            
            // Update contract rate display
            document.querySelector('#contractRate span').textContent = contractRate + '%';
            
            // Color coding for response rate
            const responseRateElement = document.getElementById('responseRateChange');
            if (responseRate >= 5) {
                responseRateElement.className = 'kpi-percentage positive';
                responseRateElement.textContent = 'üî• Excellent Performance!';
            } else if (responseRate >= 2) {
                responseRateElement.className = 'kpi-percentage neutral';
                responseRateElement.textContent = '‚úÖ Industry Average';
            } else {
                responseRateElement.className = 'kpi-percentage negative';
                responseRateElement.textContent = '‚ö†Ô∏è Below Average';
            }
        }
        
        function updateListPerformance() {
            const listPerformanceDiv = document.getElementById('listPerformance');
            
            // Group data by list type
            const listStats = {};
            campaignData.forEach(entry => {
                if (!listStats[entry.listType]) {
                    listStats[entry.listType] = {
                        messagesSent: 0,
                        responses: 0,
                        appointments: 0,
                        contracts: 0,
                        cost: 0
                    };
                }
                listStats[entry.listType].messagesSent += entry.messagesSent;
                listStats[entry.listType].responses += entry.responses;
                listStats[entry.listType].appointments += entry.appointments;
                listStats[entry.listType].contracts += entry.contracts;
                listStats[entry.listType].cost += entry.campaignCost;
            });
            
            let html = '';
            Object.entries(listStats).forEach(([listType, stats]) => {
                const responseRate = stats.messagesSent > 0 ? (stats.responses / stats.messagesSent * 100).toFixed(1) : 0;
                const costPerLead = stats.responses > 0 ? (stats.cost / stats.responses).toFixed(2) : 0;
                
                html += `
                    <div class="list-item">
                        <div class="list-name">${listType}</div>
                        <div class="list-stats">
                            <div class="stat-item">
                                <span>Messages:</span>
                                <span>${stats.messagesSent}</span>
                            </div>
                            <div class="stat-item">
                                <span>Response Rate:</span>
                                <span>${responseRate}%</span>
                            </div>
                            <div class="stat-item">
                                <span>Appointments:</span>
                                <span>${stats.appointments}</span>
                            </div>
                            <div class="stat-item">
                                <span>Contracts:</span>
                                <span>${stats.contracts}</span>
                            </div>
                            <div class="stat-item">
                                <span>Cost/Lead:</span>
                                <span>$${costPerLead}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            listPerformanceDiv.innerHTML = html || '<p>No data available yet. Add some campaign data to see performance by list type.</p>';
        }
        
        function generateInsights() {
            const insightsDiv = document.getElementById('insightsGrid');
            
            if (campaignData.length === 0) {
                insightsDiv.innerHTML = '<p>Add campaign data to generate insights and optimization recommendations.</p>';
                return;
            }
            
            const insights = [];
            
            // Group by list type for analysis
            const listStats = {};
            campaignData.forEach(entry => {
                if (!listStats[entry.listType]) {
                    listStats[entry.listType] = { entries: [], totalCost: 0, totalLeads: 0 };
                }
                listStats[entry.listType].entries.push(entry);
                listStats[entry.listType].totalCost += entry.campaignCost;
                listStats[entry.listType].totalLeads += entry.responses;
            });
            
            // Find best performing list
            let bestList = { name: '', rate: 0 };
            Object.entries(listStats).forEach(([listType, data]) => {
                const avgRate = data.entries.reduce((sum, entry) => sum + parseFloat(entry.responseRate), 0) / data.entries.length;
                if (avgRate > bestList.rate) {
                    bestList = { name: listType, rate: avgRate.toFixed(1) };
                }
            });
            
            if (bestList.name) {
                insights.push(`üèÜ Best performing list: ${bestList.name} with ${bestList.rate}% response rate. Consider allocating more budget here.`);
            }
            
            // Overall performance insights
            const totalMessages = campaignData.reduce((sum, entry) => sum + entry.messagesSent, 0);
            const totalResponses = campaignData.reduce((sum, entry) => sum + entry.responses, 0);
            const overallRate = totalMessages > 0 ? (totalResponses / totalMessages * 100).toFixed(1) : 0;
            
            if (overallRate >= 5) {
                insights.push(`üî• Outstanding overall response rate of ${overallRate}%! You're outperforming industry standards.`);
            } else if (overallRate < 2) {
                insights.push(`‚ö†Ô∏è Response rate of ${overallRate}% is below average. Consider testing new message templates or list quality.`);
            }
            
            // Cost efficiency insights
            const avgCostPerLead = campaignData.reduce((sum, entry) => sum + parseFloat(entry.costPerLead || 0), 0) / campaignData.length;
            if (avgCostPerLead > 50) {
                insights.push(`üí∞ Cost per lead averaging $${avgCostPerLead.toFixed(2)} is high. Focus on improving response rates or reducing campaign costs.`);
            } else if (avgCostPerLead < 20) {
                insights.push(`üíö Excellent cost efficiency! $${avgCostPerLead.toFixed(2)} per lead is very competitive.`);
            }
            
            // Add general recommendations
            insights.push(`üìä Recommended: Test A/B variations of your top-performing templates to optimize further.`);
            insights.push(`‚è∞ Best practice: Respond to interested leads within 15 minutes to maximize conversion rates.`);
            
            let html = '';
            insights.forEach(insight => {
                html += `<div class="note-item">${insight}</div>`;
            });
            
            insightsDiv.innerHTML = html;
        }
        
        function clearAllData() {
            if (confirm('Are you sure you want to clear all campaign data? This cannot be undone.')) {
                campaignData = [];
                localStorage.removeItem('smsKpiData');
                updateDashboard();
                updateListPerformance();
                generateInsights();
                
                // Reset display values
                document.getElementById('totalSent').textContent = '0';
                document.getElementById('responseRate').textContent = '0%';
                document.getElementById('appointmentRate').textContent = '0%';
                document.getElementById('contractsSigned').textContent = '0';
                document.getElementById('costPerLead').textContent = '$0';
                document.getElementById('costPerDeal').textContent = '$0';
                document.getElementById('totalSpend').textContent = '0';
                document.querySelector('#contractRate span').textContent = '0%';
            }
        }
        
        function exportData() {
            if (campaignData.length === 0) {
                alert('No data to export');
                return;
            }
            
            const headers = ['Date', 'List Type', 'Messages Sent', 'Responses', 'Response Rate', 'Appointments', 'Appointment Rate', 'Contracts', 'Contract Rate', 'Campaign Cost', 'Cost Per Lead', 'Cost Per Deal'];
            
            const csvContent = [
                headers.join(','),
                ...campaignData.map(entry => [
                    entry.date,
                    entry.listType,
                    entry.messagesSent,
                    entry.responses,
                    entry.responseRate + '%',
                    entry.appointments,
                    entry.appointmentRate + '%',
                    entry.contracts,
                    entry.contractRate + '%',
                    '$' + entry.campaignCost,
                    '$' + entry.costPerLead,
                    entry.costPerDeal ? '$' + entry.costPerDeal : 'N/A'
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `sms-campaign-data-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>